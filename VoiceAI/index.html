<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>VoiceAI</title>
</head>
<body>
    <h1>Voice AI</h1>
    <button id="clickbtn">中文</button>
    <br/>
    <p id="words">none</p>

    <p id="light">light</p>
    <br/>
    
<script>
    var i;
    var clickbtn = document.getElementById("clickbtn");

    setup();
    cpf.request('["grove_setColorRGB", 0, 0, 0, 0]');
    cpf.request('["grove_rgblcd_set_rgb", 0, 0, 0]');
    cpf.request('["analogWrite", 3, 0]');
    cpf.request('["grove_rgblcd_print", 0, 1, "Hello World"]');


    clickbtn.addEventListener('click', function(event) {
        cpf.initSpeechRecognition("cmn-Hant-TW");
    　　　// Start speech recognition function with English language
        GetRecognitionListenStatus(true);
    });

    function GetRecognitionListenStatus(Status){
    　　　console.log('Listen status = ' + Status);
    　　　if (Status == "true"){
    　　　　　//do somethining
    　　　}else{
    　　　　　//do somethining
    　　　}
    }

    function GetRecognizeResult(Result,Type){
    　　　if (Result.includes("綠色")) {
            cpf.request('["grove_rgblcd_set_rgb", 0, 255, 0]'); //green
            cpf.request('["grove_rgblcd_clear"]');
            cpf.request('["grove_rgblcd_print", 0, 0, "the light is green as you see"]');//how are you
            document.getElementById("words").innerHTML = "the light is green as you see " + Result +" test";
            cpf.SetSpeech("Off", "cmn-Hant-TW", "綠色早安" + Result, 1, 1);

         } else if (Result.includes("測試")) {
            cpf.request('["grove_rgblcd_set_rgb", 255, 0, 0]'); //red
            cpf.request('["grove_rgblcd_clear"]');
            cpf.request('["grove_rgblcd_print", 0, 0, "red"]');
            document.getElementById("words").innerHTML = "red " + Result;
            cpf.SetSpeech("On", "cmn-Hant-TW", Result, 2, 1);

         } else if (Result.includes("開燈")) {
            cpf.request('["grove_rgblcd_set_rgb", 0, 0, 255]'); //blue
            cpf.request('["grove_rgblcd_clear"]');
            cpf.request('["grove_rgblcd_print", 0, 0, "light on"]');
            document.getElementById("words").innerHTML = Result;
            for(i=0; i<255; i+=10){
                cpf.request('["grove_setColorRGB", 0, 0, 0, '+ i +']');
                document.getElementById("light").innerHTML = i;
            }
            for(i=255; i>0; i-=10){
                cpf.request('["grove_setColorRGB", 0, 0, 0, '+ i +']');
                document.getElementById("light").innerHTML = i;
            }
            cpf.SetSpeech("Off", "cmn-Hant-TW", Result, 1, 2);

         } else if (Result.includes("好熱")) {
            cpf.request('["grove_rgblcd_set_rgb", 255, 0, 0]'); //red
            cpf.request('["grove_rgblcd_clear"]');
            cpf.request('["grove_rgblcd_print", 0, 0, "red"]');
            document.getElementById("words").innerHTML = "red " + Result;
            for(i=0; i<255; i+=10){
                cpf.request('["analogWrite", 3, ' + i +']');
                document.getElementById("light").innerHTML = i;
            }
            cpf.SetSpeech("On", "cmn-Hant-TW", Result, 0.5, 2);

         } else {
            cpf.request('["grove_rgblcd_set_rgb", 0, 0, 0]');
            cpf.request('["grove_rgblcd_clear"]');
            cpf.request('["grove_rgblcd_print", 0, 0, "ready"]');
            document.getElementById("words").innerHTML = "ready " + Result;
         }
    }
    
    function setup(){
        if(cpf)
            cpf.setPinMode('["resetPin"],["grove_rgblcd_begin", 16, 2], ["setPinMode", "digital", 3, "PWM"], ["grove_newChainableLED",7, 8, 1]');
    }
</script>
</body>
</html>